import{_ as t,I as i,c as l,o,a3 as r,J as a}from"./chunks/framework.xghCY4x5.js";const E=JSON.parse('{"title":"指令权限系统使用指南","description":"","frontmatter":{},"headers":[],"relativePath":"docs/guides/permission_usage.md","filePath":"docs/guides/permission_usage.md","lastUpdated":1758375616000}'),p={name:"docs/guides/permission_usage.md"};function h(d,s,g,c,k,m){const e=i("NolebaseGitContributors"),n=i("NolebaseGitChangelog");return o(),l("div",null,[s[0]||(s[0]=r(`<h1 id="指令权限系统使用指南" tabindex="-1">指令权限系统使用指南 <a class="header-anchor" href="#指令权限系统使用指南" aria-label="Permalink to “指令权限系统使用指南”">​</a></h1><h2 id="⚠️-首要步骤-配置你的主人-master-user" tabindex="-1">⚠️ 首要步骤：配置你的主人 (Master User)！ <a class="header-anchor" href="#⚠️-首要步骤-配置你的主人-master-user" aria-label="Permalink to “⚠️ 首要步骤：配置你的主人 (Master User)！”">​</a></h2><p>在开始使用权限系统之前，<strong>最重要、最优先</strong>的一步是在你的机器人配置文件中设置 <strong>Master 用户</strong>。</p><h3 id="什么是-master-用户" tabindex="-1">什么是 Master 用户？ <a class="header-anchor" href="#什么是-master-用户" aria-label="Permalink to “什么是 Master 用户？”">​</a></h3><p>Master 用户是机器人的<strong>最高管理员</strong>，拥有所有权限，可以执行任何操作，不受权限系统的任何限制。你可以把它理解为机器人的“主人”。</p><h3 id="为什么必须先配置-master-用户" tabindex="-1">为什么必须先配置 Master 用户？ <a class="header-anchor" href="#为什么必须先配置-master-用户" aria-label="Permalink to “为什么必须先配置 Master 用户？”">​</a></h3><ul><li><strong>初始授权</strong>：权限管理指令（例如 <code>/permission grant</code>）本身是需要权限才能使用的。如果没有一个初始的最高权限用户，就没人能够分配权限，整个权限系统就无法启动。</li><li><strong>安全保障</strong>：Master 用户是管理机器人的最终保障，确保你永远不会因为错误的权限配置而失去对机器人的控制。</li></ul><p>在你完成 Master 用户的配置之前，请<strong>不要</strong>尝试使用任何权限管理指令，否则你只会收到“权限不足”的提示。</p><blockquote><p><strong>提示</strong>: Master 用户的配置在 <code>config/bot_config.toml</code> 文件中完成。你需要找到 <code>[permission]</code> 部分，然后将自己的用户 ID 添加到 <code>master_users</code> 字段中。</p><p>下面是一个具体的配置示例：</p><div class="language-toml"><button title="Copy Code" class="copy"></button><span class="lang">toml</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># config/bot_config.toml</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">permission</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 权限系统配置</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Master用户配置（拥有最高权限，无视所有权限节点）</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 格式：[[platform, user_id], ...]</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 示例：[[&quot;qq&quot;, &quot;123456&quot;], [&quot;telegram&quot;, &quot;user789&quot;]]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">master_users = [[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;qq&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;123456789&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]] </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># &lt;--- 在这里填入你的平台和用户ID</span></span></code></pre></div><p><strong>请务必注意格式</strong>：</p><ul><li>使用<strong>双层</strong>方括号 <code>[[...]]</code>。</li><li>平台和用户 ID 都需要用<strong>英文双引号</strong> <code>&quot;&quot;</code> 包裹。</li><li>常见的平台名称有 <code>&quot;qq&quot;</code> 等。</li></ul></blockquote><hr><h2 id="什么是权限系统" tabindex="-1">什么是权限系统？ <a class="header-anchor" href="#什么是权限系统" aria-label="Permalink to “什么是权限系统？”">​</a></h2><p>在你配置好 Master 用户之后，我们再来了解这个强大的权限系统。</p><p>机器人拥有一个精细的权限控制系统，可以控制谁可以使用哪些功能。这确保了机器人不会被滥用，并且只有授权用户才能执行敏感操作。</p><p>权限系统的核心是 <strong>权限节点</strong>。每个插件或功能都可以定义自己的权限节点，你可以把它们想象成一把把不同的“钥匙”。拥有某把“钥匙”（即被授予了某个权限节点）的用户，就可以使用对应的功能。</p><h2 id="权限管理指令详解" tabindex="-1">权限管理指令详解 <a class="header-anchor" href="#权限管理指令详解" aria-label="Permalink to “权限管理指令详解”">​</a></h2><p>作为 Master 用户，或已被授予权限的管理员，你可以通过 <code>/permission</code> 系列指令来管理权限。</p><h3 id="_1-授予与撤销权限" tabindex="-1">1. 授予与撤销权限 <a class="header-anchor" href="#_1-授予与撤销权限" aria-label="Permalink to “1. 授予与撤销权限”">​</a></h3><ul><li><p><strong>授予权限 (grant)</strong>: 让某个用户可以使用特定功能。</p><ul><li><strong>格式</strong>: <code>/permission grant &lt;@用户或用户ID&gt; &lt;权限节点&gt;</code></li><li><strong>示例</strong>: <code>/permission grant @小明 plugin.music.play</code></li></ul></li><li><p><strong>撤销权限 (revoke)</strong>: 取消某个用户使用特定功能的权限。</p><ul><li><strong>格式</strong>: <code>/permission revoke &lt;@用户或用户ID&gt; &lt;权限节点&gt;</code></li><li><strong>示例</strong>: <code>/permission revoke @小明 plugin.music.play</code></li></ul></li></ul><h3 id="_2-查询与检查权限" tabindex="-1">2. 查询与检查权限 <a class="header-anchor" href="#_2-查询与检查权限" aria-label="Permalink to “2. 查询与检查权限”">​</a></h3><ul><li><p><strong>查看权限 (list)</strong>: 查看自己或他人拥有的所有权限。</p><ul><li><strong>格式</strong>: <code>/permission list [@用户或用户ID]</code></li><li><strong>示例</strong>: 查看自己的权限 <code>/permission list</code>，查看小明的权限 <code>/permission list @小明</code>。</li></ul></li><li><p><strong>检查特定权限 (check)</strong>: 检查某个用户是否拥有特定的权限节点。</p><ul><li><strong>格式</strong>: <code>/permission check &lt;@用户或用户ID&gt; &lt;权限节点&gt;</code></li><li><strong>示例</strong>: <code>/permission check @小明 plugin.music.play</code></li></ul></li></ul><h3 id="_3-工具指令" tabindex="-1">3. 工具指令 <a class="header-anchor" href="#_3-工具指令" aria-label="Permalink to “3. 工具指令”">​</a></h3><ul><li><p><strong>查看所有权限节点 (nodes)</strong>: 查看机器人中所有可用的“钥匙”。</p><ul><li><strong>格式</strong>: <code>/permission nodes [插件名]</code></li><li><strong>示例</strong>: 查看所有权限 <code>/permission nodes</code>，只看音乐插件的 <code>/permission nodes music</code>。</li></ul></li><li><p><strong>获取帮助 (help)</strong>: 忘记指令时寻求帮助。</p><ul><li><strong>格式</strong>: <code>/permission help</code></li></ul></li></ul><h2 id="常见问题" tabindex="-1">常见问题 <a class="header-anchor" href="#常见问题" aria-label="Permalink to “常见问题”">​</a></h2><p><strong>Q: 我输入了指令，但机器人提示我“权限不足”，怎么办？</strong> A: 这意味着你没有执行该操作所需的“钥匙”（权限节点）。如果你是机器人的主人，请先检查是否已在配置文件中将自己设为 Master 用户。如果不是，你需要联系机器人的管理员，让他使用 <code>/permission grant</code> 指令授予你相应的权限。</p><p><strong>Q: 我是管理员，该如何找到我需要的权限节点名称？</strong> A: 你可以使用 <code>/permission nodes</code> 指令来查看所有可用的权限节点及其描述。通常，权限节点的名称都很有规律，例如 <code>plugin.插件名.功能名</code>。</p><p><strong>Q: 我不小心给错了权限怎么办？</strong> A: 不用担心，立即使用 <code>/permission revoke</code> 指令将错误的权限撤销即可。</p><h2 id="推荐权限配置流程" tabindex="-1">推荐权限配置流程 <a class="header-anchor" href="#推荐权限配置流程" aria-label="Permalink to “推荐权限配置流程”">​</a></h2><p>为了帮助你更好地理解和使用权限系统，这里提供一个推荐的操作流程：</p><div class="language-mermaid"><button title="Copy Code" class="copy"></button><span class="lang">mermaid</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">graph TD</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    A[开始：配置机器人] --&amp;gt; B{配置文件中是否已设置 Master User?};</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    B --&amp;gt;|否| C[打开配置文件 config.json];</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    C --&amp;gt; D[找到 master_users 字段];</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    D --&amp;gt; E[填入你自己的用户ID];</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    E --&amp;gt; F[保存配置文件并重启机器人];</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    B --&amp;gt;|是| G[机器人正常启动];</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    F --&amp;gt; G;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    G --&amp;gt; H[使用 /permission 指令为其他管理员授权];</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    H --&amp;gt; I[根据需要为普通用户授予特定功能权限];</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    I --&amp;gt; J[完成权限配置];</span></span></code></pre></div>`,29)),a(e),a(n)])}const b=t(p,[["render",h]]);export{E as __pageData,b as default};
