import{_ as h,I as i,c as t,o as p,a3 as k,J as a}from"./chunks/framework.Coydrlbh.js";const F=JSON.parse('{"title":"ğŸ¯ æ§åˆ¶æ’ä»¶çš„å¯ç”¨èŒƒå›´","description":"","frontmatter":{},"headers":[],"relativePath":"docs/development/plugins/command-scope.md","filePath":"docs/development/plugins/command-scope.md","lastUpdated":1756555974000}'),e={name:"docs/development/plugins/command-scope.md"};function r(E,s,d,o,g,y){const n=i("NolebaseGitContributors"),l=i("NolebaseGitChangelog");return p(),t("div",null,[s[0]||(s[0]=k(`<h1 id="ğŸ¯-æ§åˆ¶æ’ä»¶çš„å¯ç”¨èŒƒå›´" tabindex="-1">ğŸ¯ æ§åˆ¶æ’ä»¶çš„å¯ç”¨èŒƒå›´ <a class="header-anchor" href="#ğŸ¯-æ§åˆ¶æ’ä»¶çš„å¯ç”¨èŒƒå›´" aria-label="Permalink to â€œğŸ¯ æ§åˆ¶æ’ä»¶çš„å¯ç”¨èŒƒå›´â€">â€‹</a></h1><p>åœ¨å¼€å‘ MoFox_Bot æ’ä»¶æ—¶ï¼Œç²¾ç¡®æ§åˆ¶æ¯ä¸ªç»„ä»¶ï¼ˆå°¤å…¶æ˜¯å‘½ä»¤ï¼‰åœ¨ä½•å¤„ç”Ÿæ•ˆæ˜¯è‡³å…³é‡è¦çš„ã€‚ä½ å¯ä»¥å†³å®šä¸€ä¸ªå‘½ä»¤æ˜¯åªèƒ½åœ¨ç¾¤èŠä¸­ä½¿ç”¨ï¼Œè¿˜æ˜¯åªèƒ½ç”±ç§èŠè§¦å‘ï¼Œæˆ–è€…ä¸¤è€…çš†å¯ã€‚</p><p>è¿™ä¸»è¦é€šè¿‡åœ¨ç»„ä»¶ç±»ä¸­è®¾ç½® <code>chat_type_allow</code> å±æ€§æ¥å®ç°ã€‚</p><h2 id="chat-type-allow-å±æ€§è¯¦è§£" tabindex="-1"><code>chat_type_allow</code> å±æ€§è¯¦è§£ <a class="header-anchor" href="#chat-type-allow-å±æ€§è¯¦è§£" aria-label="Permalink to â€œchat_type_allow å±æ€§è¯¦è§£â€">â€‹</a></h2><p><code>chat_type_allow</code> å±æ€§æ¥æ”¶ä¸€ä¸ª <code>ChatType</code> æšä¸¾å€¼ï¼Œè¯¥æšä¸¾å®šä¹‰äº†ä¸‰ç§å¯ç”¨èŒƒå›´ï¼š</p><ul><li><code>ChatType.ALL</code>: <strong>é€šç”¨</strong> - ç»„ä»¶åœ¨<strong>ç¾¤èŠ</strong>å’Œ<strong>ç§èŠ</strong>ä¸­éƒ½å¯ç”¨ã€‚</li><li><code>ChatType.GROUP</code>: <strong>ä»…ç¾¤èŠ</strong> - ç»„ä»¶åªèƒ½åœ¨ç¾¤èŠä¸­è¢«è§¦å‘æˆ–æ¿€æ´»ã€‚</li><li><code>ChatType.PRIVATE</code>: <strong>ä»…ç§èŠ</strong> - ç»„ä»¶åªèƒ½åœ¨ä¸æœºå™¨äººçš„ç§èŠä¸­è¢«è§¦å‘æˆ–æ¿€æ´»ã€‚</li></ul><hr><h2 id="ç¤ºä¾‹-åˆ›å»ºä¸€ä¸ªä»…é™ç¾¤èŠçš„å‘½ä»¤" tabindex="-1">ç¤ºä¾‹ï¼šåˆ›å»ºä¸€ä¸ªä»…é™ç¾¤èŠçš„å‘½ä»¤ <a class="header-anchor" href="#ç¤ºä¾‹-åˆ›å»ºä¸€ä¸ªä»…é™ç¾¤èŠçš„å‘½ä»¤" aria-label="Permalink to â€œç¤ºä¾‹ï¼šåˆ›å»ºä¸€ä¸ªä»…é™ç¾¤èŠçš„å‘½ä»¤â€">â€‹</a></h2><p>å‡è®¾æˆ‘ä»¬è¦åˆ›å»ºä¸€ä¸ª <code>/roll</code> å‘½ä»¤ï¼Œç”¨äºåœ¨ç¾¤èŠä¸­æŠ•éª°å­ã€‚è¿™ä¸ªå‘½ä»¤åœ¨ç§èŠä¸­æ²¡æœ‰æ„ä¹‰ï¼Œæ‰€ä»¥æˆ‘ä»¬å¸Œæœ›ç¦ç”¨å®ƒã€‚</p><div class="language-python"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> src.plugin_system </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> PlusCommand, CommandArgs, ChatType</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> typing </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Tuple, Optional</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> random</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> RollDiceCommand</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">PlusCommand</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;&quot;&quot;ä¸€ä¸ªä»…åœ¨ç¾¤èŠä¸­å¯ç”¨çš„æŠ•éª°å­å‘½ä»¤ã€‚&quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    command_name </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;roll&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    command_description </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;æŠ•ä¸€ä¸ª 1 åˆ° 100 ä¹‹é—´çš„éª°å­ã€‚&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # --- å…³é”®è®¾ç½® ---</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # å°†å¯ç”¨èŒƒå›´è®¾ç½®ä¸ºä»…ç¾¤èŠ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    chat_type_allow </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ChatType.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">GROUP</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> execute</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(self, args: CommandArgs) -&gt; Tuple[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">bool</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, Optional[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">], </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">bool</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # args.sender_name åŒ…å«äº†å‘é€è€…çš„æ˜µç§°</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        sender </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> args.sender_name </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">or</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;ä¸€ä½å†’é™©è€…&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        result </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> random.randint(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # self.send_text ä¼šåœ¨å‘½ä»¤è¢«è§¦å‘çš„èŠå¤©çª—å£ä¸­å›å¤æ¶ˆæ¯</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        await</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.send_text(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ğŸ² </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sender</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> æŠ•å‡ºäº† </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">result</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ç‚¹ï¼&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> True</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;æˆåŠŸæŠ•æ·éª°å­&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">True</span></span></code></pre></div><p><strong>å·¥ä½œåŸç†</strong>:</p><ul><li>å½“ç”¨æˆ·åœ¨<strong>ç¾¤èŠ</strong>ä¸­å‘é€ <code>/roll</code> æ—¶ï¼Œ<code>RollDiceCommand</code> ä¼šè¢«æˆåŠŸè§¦å‘ã€‚</li><li>å¦‚æœç”¨æˆ·åœ¨ä¸æœºå™¨äººçš„<strong>ç§èŠ</strong>ä¸­å‘é€ <code>/roll</code>ï¼Œå‘½ä»¤å¤„ç†å™¨ä¼šç›´æ¥å¿½ç•¥å®ƒï¼Œå› ä¸ºå®ƒä¸æ»¡è¶³ <code>chat_type_allow = ChatType.GROUP</code> çš„æ¡ä»¶ã€‚</li></ul><h2 id="ç¤ºä¾‹-åˆ›å»ºä¸€ä¸ªä»…é™ç§èŠçš„ç®¡ç†å‘½ä»¤" tabindex="-1">ç¤ºä¾‹ï¼šåˆ›å»ºä¸€ä¸ªä»…é™ç§èŠçš„ç®¡ç†å‘½ä»¤ <a class="header-anchor" href="#ç¤ºä¾‹-åˆ›å»ºä¸€ä¸ªä»…é™ç§èŠçš„ç®¡ç†å‘½ä»¤" aria-label="Permalink to â€œç¤ºä¾‹ï¼šåˆ›å»ºä¸€ä¸ªä»…é™ç§èŠçš„ç®¡ç†å‘½ä»¤â€">â€‹</a></h2><p>ç°åœ¨ï¼Œæˆ‘ä»¬æ¥åˆ›å»ºä¸€ä¸ª <code>/set_master</code> å‘½ä»¤ï¼Œç”¨äºè®¾ç½®æœºå™¨äººçš„ç®¡ç†å‘˜ã€‚è¿™ç±»æ•æ„Ÿæ“ä½œæ˜¾ç„¶åªåº”è¯¥åœ¨ç§èŠä¸­è¿›è¡Œã€‚</p><div class="language-python"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> src.plugin_system </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> PlusCommand, CommandArgs, ChatType</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> typing </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Tuple, Optional</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> SetMasterCommand</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">PlusCommand</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;&quot;&quot;ä¸€ä¸ªä»…åœ¨ç§èŠä¸­å¯ç”¨çš„ç®¡ç†å‘˜è®¾ç½®å‘½ä»¤ã€‚&quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    command_name </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;set_master&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    command_description </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;å°†æŸä¸ªç”¨æˆ·è®¾ç½®ä¸ºæœºå™¨äººç®¡ç†å‘˜ã€‚&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # --- å…³é”®è®¾ç½® ---</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # å°†å¯ç”¨èŒƒå›´è®¾ç½®ä¸ºä»…ç§èŠ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    chat_type_allow </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ChatType.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">PRIVATE</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> execute</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(self, args: CommandArgs) -&gt; Tuple[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">bool</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, Optional[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">], </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">bool</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # åœ¨çœŸå®åœºæ™¯ä¸­ï¼Œè¿™é‡Œä¼šæœ‰æƒé™æ ¡éªŒå’Œæ›´å¤æ‚çš„é€»è¾‘</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        target_user </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> args.command_text </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># è·å–å‘½ä»¤åçš„æ–‡æœ¬ï¼Œä¾‹å¦‚ /set_master 12345</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> not</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> target_user:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            await</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.send_text(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;è¯·æŒ‡å®šè¦è®¾ç½®ä¸ºç®¡ç†å‘˜çš„ç”¨æˆ· IDã€‚&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> False</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ç¼ºå°‘å‚æ•°&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">True</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # ... æ‰§è¡Œè®¾ç½®ç®¡ç†å‘˜çš„é€»è¾‘ ...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        await</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.send_text(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;âœ… å·²æˆåŠŸå°†ç”¨æˆ· </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">target_user</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> è®¾ç½®ä¸ºç®¡ç†å‘˜ã€‚&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> True</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;æˆåŠŸè®¾ç½®ç®¡ç†å‘˜&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">True</span></span></code></pre></div><p><strong>å·¥ä½œåŸç†</strong>:</p><ul><li>ç”¨æˆ·å¿…é¡»<strong>ç§èŠ</strong>æœºå™¨äººå¹¶å‘é€ <code>/set_master 12345</code> æ‰èƒ½è§¦å‘æ­¤å‘½ä»¤ã€‚</li><li>åœ¨ä»»ä½•<strong>ç¾¤èŠ</strong>ä¸­å‘é€æ­¤å‘½ä»¤éƒ½å°†æ˜¯æ— æ•ˆçš„ã€‚</li></ul><h2 id="ä½•æ—¶ä½¿ç”¨-chattype-all" tabindex="-1">ä½•æ—¶ä½¿ç”¨ <code>ChatType.ALL</code>ï¼Ÿ <a class="header-anchor" href="#ä½•æ—¶ä½¿ç”¨-chattype-all" aria-label="Permalink to â€œä½•æ—¶ä½¿ç”¨ ChatType.ALLï¼Ÿâ€">â€‹</a></h2><p><code>ChatType.ALL</code> æ˜¯æœ€å¸¸è§çš„è®¾ç½®ï¼Œé€‚ç”¨äºé‚£äº›åœ¨ä»»ä½•èŠå¤©åœºæ™¯ä¸‹éƒ½æœ‰æ„ä¹‰çš„åŠŸèƒ½ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªæŸ¥è¯¢å¤©æ°”ã€è®²ç¬‘è¯æˆ–è€…åƒæˆ‘ä»¬å¿«é€Ÿå…¥é—¨æŒ‡å—ä¸­çš„ <code>/hello</code> å‘½ä»¤ï¼Œæ— è®ºæ˜¯åœ¨ç¾¤èŠä¸­æ´»è·ƒæ°”æ°›ï¼Œè¿˜æ˜¯åœ¨ç§èŠä¸­è¿›è¡Œäº’åŠ¨ï¼Œéƒ½æ˜¯åˆé€‚çš„ã€‚</p><div class="language-python"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> HelloCommand</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">PlusCommand</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;&quot;&quot;ä¸€ä¸ªç®€å•çš„é—®å€™å‘½ä»¤ï¼Œéšå¤„å¯ç”¨ã€‚&quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    command_name </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;hello&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    command_description </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;å‘æœºå™¨äººå‘é€ä¸€ä¸ªç®€å•çš„é—®å€™ã€‚&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # --- å…³é”®è®¾ç½® ---</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # åœ¨ç¾¤èŠå’Œç§èŠä¸­éƒ½å¯ç”¨</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    chat_type_allow </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ChatType.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">ALL</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> execute</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(self, args: CommandArgs) -&gt; Tuple[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">bool</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, Optional[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">], </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">bool</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        await</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.send_text(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Hello, World!&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> True</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;æˆåŠŸå‘é€é—®å€™&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">True</span></span></code></pre></div><p>é€šè¿‡çµæ´»è¿ç”¨ <code>chat_type_allow</code>ï¼Œä½ å¯ä»¥è®¾è®¡å‡ºè¡Œä¸ºå¾—ä½“ã€åŠŸèƒ½è¾¹ç•Œæ¸…æ™°çš„å¼ºå¤§æ’ä»¶ã€‚</p><hr><h2 id="æ‰©å±•åˆ°-action-åŠ¨ä½œ" tabindex="-1">æ‰©å±•åˆ° Action (åŠ¨ä½œ) <a class="header-anchor" href="#æ‰©å±•åˆ°-action-åŠ¨ä½œ" aria-label="Permalink to â€œæ‰©å±•åˆ° Action (åŠ¨ä½œ)â€">â€‹</a></h2><p><code>chat_type_allow</code> å±æ€§ä¸ä»…é™äº <code>Command</code>ï¼Œå®ƒåŒæ ·å¯ä»¥åº”ç”¨äº <code>Action</code>ï¼Œç”¨äºæ§åˆ¶ Action çš„è§¦å‘ç¯å¢ƒã€‚</p><h3 id="ç¤ºä¾‹-åˆ›å»ºä¸€ä¸ªåªåœ¨ç¾¤èŠä¸­å‘é€çš„æé†’-action" tabindex="-1">ç¤ºä¾‹ï¼šåˆ›å»ºä¸€ä¸ªåªåœ¨ç¾¤èŠä¸­å‘é€çš„æé†’ Action <a class="header-anchor" href="#ç¤ºä¾‹-åˆ›å»ºä¸€ä¸ªåªåœ¨ç¾¤èŠä¸­å‘é€çš„æé†’-action" aria-label="Permalink to â€œç¤ºä¾‹ï¼šåˆ›å»ºä¸€ä¸ªåªåœ¨ç¾¤èŠä¸­å‘é€çš„æé†’ Actionâ€">â€‹</a></h3><p>å‡è®¾æˆ‘ä»¬æƒ³è®©æœºå™¨äººåœ¨ç¾¤èŠä¸­å¶å°”æé†’å¤§å®¶â€œä¸è¦å‘é€ä¸å’Œè°å†…å®¹â€ã€‚è¿™ä¸ªåŠŸèƒ½åœ¨ç§èŠä¸­æ˜¾ç„¶æ˜¯ä¸éœ€è¦çš„ã€‚</p><div class="language-python"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> src.plugin_system </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> BaseAction, ActionActivationType, ChatType</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> typing </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Tuple</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> random</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> GroupReminderAction</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">BaseAction</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;&quot;&quot;ä¸€ä¸ªåªåœ¨ç¾¤èŠä¸­éšæœºå‘é€æé†’çš„åŠ¨ä½œã€‚&quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    action_name </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;group_reminder&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    action_description </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;åœ¨ç¾¤èŠä¸­éšæœºå‘é€ä¸€æ¡å’Œè°å‹å–„çš„æé†’ã€‚&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # --- æ¿€æ´»æ§åˆ¶ ---</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    activation_type </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ActionActivationType.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">RANDOM</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    random_activation_probability </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0.05</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 5% çš„æ¦‚ç‡è¢«æ¿€æ´»</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # --- å…³é”®è®¾ç½® ---</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # å°†å¯ç”¨èŒƒå›´è®¾ç½®ä¸ºä»…ç¾¤èŠ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    chat_type_allow </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ChatType.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">GROUP</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> execute</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(self) -&gt; Tuple[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">bool</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        reminders </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            &quot;æé†’ä¸€ä¸‹ï¼Œè¯·å¤§å®¶ä¿æŒå‹å–„äº¤æµå“¦ï½&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            &quot;æ„å»ºå’Œè°ç¤¾åŒºï¼Œä»ä½ æˆ‘åšèµ·ï¼&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            &quot;ä»Šå¤©ä¹Ÿè¦å…ƒæ°”æ»¡æ»¡åœ°èŠå¤©å‘€ï¼&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        ]</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        await</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.send_text(random.choice(reminders))</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> True</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;æˆåŠŸå‘é€äº†ä¸€æ¡ç¾¤èŠæé†’&quot;</span></span></code></pre></div><p><strong>å·¥ä½œåŸç†</strong>:</p><ul><li>è¿™ä¸ª <code>GroupReminderAction</code> åªæœ‰åœ¨<strong>ç¾¤èŠ</strong>æ¶ˆæ¯çš„ä¸Šä¸‹æ–‡ä¸­æ‰å¯èƒ½è¢«æ¿€æ´»ã€‚</li><li>åœ¨<strong>ç§èŠ</strong>ä¸­ï¼Œæ— è®ºå¯¹è¯å¦‚ä½•è¿›è¡Œï¼Œè¿™ä¸ª Action éƒ½ä¸ä¼šè¿›å…¥å¤‡é€‰æ± ï¼Œå› ä¸ºå®ƒä¸æ»¡è¶³ <code>chat_type_allow = ChatType.GROUP</code> çš„æ¡ä»¶ã€‚</li></ul><p>é€šè¿‡è¿™ç§æ–¹å¼ï¼Œä½ å¯ä»¥ä¸ºä¸åŒåœºæ™¯è®¾è®¡å‡ºæ›´å…·é’ˆå¯¹æ€§çš„è‡ªåŠ¨åŒ–è¡Œä¸ºï¼Œè®©ä½ çš„æœºå™¨äººæ›´åŠ æ™ºèƒ½å’Œå¾—ä½“ã€‚</p>`,30)),a(n),a(l)])}const C=h(e,[["render",r]]);export{F as __pageData,C as default};
